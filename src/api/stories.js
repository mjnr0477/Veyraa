import { db, storage } from './firebase';import { ref, uploadBytes, getDownloadURL } from 'firebase/storage';import { collection, addDoc, serverTimestamp, query, where, getDocs, orderBy } from 'firebase/firestore';export async function uploadStory(uid,file){const storyRef=ref(storage,'stories/'+uid+'/'+Date.now());await uploadBytes(storyRef,file);const url=await getDownloadURL(storyRef);await addDoc(collection(db,'stories'),{uid,url,createdAt:serverTimestamp()});return url;}export async function getStories(uidList){const q=query(collection(db,'stories'),where('uid','in',uidList),orderBy('createdAt','desc'));const snap=await getDocs(q);return snap.docs.map(doc=>({id:doc.id,...doc.data()}));}
