import React, { useState, useEffect } from 'react';import { View, Text, TextInput, Button, FlatList } from 'react-native';import { addComment, getComments } from '../api/comments';export default function CommentSection({ postId, currentUid }){const [comments,setComments]=useState([]);const [text,setText]=useState('');useEffect(()=>{(async()=>{const c = await getComments(postId);setComments(c);})();},[postId]);const handleAdd=async()=>{if(text.trim()==='') return;const comment={uid:currentUid,text,date:new Date().toISOString()};await addComment(postId,comment);setComments(prev=>[...prev,comment]);setText('');};return(<View style={{marginTop:10}}><FlatList data={comments} keyExtractor={(item,i)=>i.toString()} renderItem={({item})=>(<Text>{item.text}</Text>)} /><TextInput placeholder='Add a comment...' value={text} onChangeText={setText} style={{borderWidth:1,borderColor:'#ccc',padding:5,marginVertical:5}} /><Button title='Comment' onPress={handleAdd}/></View>);}
